# Axira Frontend Build Guide

## Overview

This document provides comprehensive instructions for building two React/TypeScript frontend applications:

1. **Axira Home** - End-user facing application for bankers, QA reviewers, and operations staff
2. **Axira Studio** - Admin/IT facing application for workflow design, agent management, and governance

Both applications use GraphQL middleware to communicate with 8 backend microservices.

---

## Target Demo: LSNB Bank Pilot

The demo showcases three pillars:
- **Pillar 1**: Maya's Personal Banker Copilot (intelligent, contextual, policy-aware)
- **Pillar 2**: QA Reviewer Superpowers (document presence & audit trail at scale)
- **Pillar 3**: IT in Control (no-code/low-code customization, agent-guided)

---

## Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend Applications                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        Axira Home            â”‚           Axira Studio                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Chat Interface         â”‚  â”‚  â”‚ Agent Designer (DAG View)          â”‚  â”‚
â”‚  â”‚ Role-based Dashboards  â”‚  â”‚  â”‚ Workflow Builder                   â”‚  â”‚
â”‚  â”‚ Evidence Viewer        â”‚  â”‚  â”‚ Trust Graph Visualizer             â”‚  â”‚
â”‚  â”‚ Subject Context Panel  â”‚  â”‚  â”‚ Skill Catalog Browser              â”‚  â”‚
â”‚  â”‚ Work Queue             â”‚  â”‚  â”‚ Publish/Governance Flow            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GraphQL Gateway (BFF Layer)                          â”‚
â”‚  - Schema stitching from all services                                    â”‚
â”‚  - Authentication/Authorization pass-through                             â”‚
â”‚  - Subscription support for real-time updates                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼             â–¼               â–¼               â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Trust Graph  â”‚ â”‚  Skills   â”‚ â”‚  Evidence   â”‚ â”‚Conversationâ”‚ â”‚  Capability â”‚
â”‚  :8081      â”‚ â”‚  :8082    â”‚ â”‚   :8083     â”‚ â”‚   :8084   â”‚ â”‚   :8085     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼             â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Agent Catalogâ”‚ â”‚Orchestratorâ”‚ â”‚   Memory    â”‚ â”‚  Search   â”‚
â”‚   :8086     â”‚ â”‚   :8090   â”‚ â”‚   :8091     â”‚ â”‚   :8092   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technology Stack

### Frontend Stack
```yaml
Framework: React 18+ with TypeScript 5+
Build Tool: Vite
State Management: TanStack Query (React Query) for server state, Zustand for client state
GraphQL Client: Apollo Client 3.x with subscriptions
Routing: React Router v6
UI Components: Radix UI primitives + Tailwind CSS
Charts/Visualization: 
  - D3.js for Trust Graph visualization
  - ReactFlow for DAG/workflow editor
  - Recharts for dashboards
Rich Text/Chat: TipTap or Lexical for message rendering
Icons: Lucide React
Forms: React Hook Form + Zod validation
Testing: Vitest + React Testing Library + Playwright (e2e)
```

### GraphQL Gateway
```yaml
Framework: Apollo Server 4 or GraphQL Yoga
Schema: Code-first with TypeGraphQL or schema stitching
Subscriptions: GraphQL WS for real-time
Auth: JWT validation, tenant context propagation
```

---

## Project Structure

### Monorepo Layout (Recommended)
```
axira-frontend/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared/                    # Shared components, hooks, types
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/        # Reusable UI components
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/             # Shared React hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ types/             # TypeScript types/interfaces
â”‚   â”‚   â”‚   â”œâ”€â”€ graphql/           # Generated types, fragments
â”‚   â”‚   â”‚   â””â”€â”€ utils/             # Utility functions
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ axira-home/                # End-user application
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ features/          # Feature-based modules
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ evidence/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ workqueue/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ subjects/
â”‚   â”‚   â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â””â”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ axira-studio/              # Admin/IT application
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ agent-designer/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ workflow-builder/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ trust-graph/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ skill-catalog/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ governance/
â”‚   â”‚   â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â””â”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ graphql-gateway/           # BFF GraphQL server
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ schema/
â”‚       â”‚   â”œâ”€â”€ resolvers/
â”‚       â”‚   â”œâ”€â”€ datasources/
â”‚       â”‚   â””â”€â”€ index.ts
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ codegen.yml                    # GraphQL codegen config
â”œâ”€â”€ turbo.json                     # Turborepo config
â””â”€â”€ package.json
```

---

## Axira Home - Feature Specifications

### 1. Authentication & Context

**User Context Model:**
```typescript
interface UserContext {
  userId: string;
  orgId: string;              // Tenant ID
  workspaceId: string;
  displayName: string;
  email: string;
  roles: Role[];              // QA_REVIEWER, BRANCH_BANKER, OPS_LEAD, etc.
  branch?: Branch;            // Branch assignment
  resourceSet: ResourceSet;   // What user can access (from Trust Graph)
}

interface ResourceSet {
  allowedSubjectKinds: string[];
  allowedBranches: string[];
  allowedProductTypes: string[];
  dataMaskingRules: MaskingRule[];
  policyPacks: string[];
}
```

**Implementation Notes:**
- Fetch user context on app load from Trust Graph service
- Store in React Context + Zustand for easy access
- Include in all GraphQL requests via Apollo Link

---

### 2. Chat Interface (Pillar 1 Demo)

**Purpose:** Maya's intelligent copilot that understands context, plans work, and explains decisions.

**Key Components:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chat Header                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Active Subject: Garcia Household    [Switch Subject â–¼]      â”‚ â”‚
â”‚ â”‚ Agent: Branch Banker Assistant      [Change Agent â–¼]        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Message Thread                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [User Message]                                               â”‚ â”‚
â”‚ â”‚ "I've got Garcia household on the line..."                  â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ [Agent Response - Structured]                                â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ Planning Indicator (collapsible):                        â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ Selected Agent: Branch Banker Assistant                â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â€¢ Process Agents: DocPresenceCheck, CIPStatus...        â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ Summary Card:                                                â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚ â”‚ âœ… All required docs present for DDA ending 1234     â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ âš ï¸ Missing beneficiary form for savings 5678         â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ âœ… CIP/CIF checks up to date                         â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ âŒ Commercial loan access denied (policy block)      â”‚   â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ Citations: [SharePoint Policy â†—] [DMS Doc #123 â†—]          â”‚ â”‚
â”‚ â”‚                                                              â”‚ â”‚
â”‚ â”‚ Actions: [Create QA Case] [How did you decide this?]       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input Area                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [Message input...                              ] [Send â¤]   â”‚ â”‚
â”‚ â”‚ Suggested: "What else should I check?" | "Create follow-up" â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**GraphQL Operations:**

```graphql
# Start or continue conversation
mutation SendMessage($input: SendMessageInput!) {
  sendMessage(input: $input) {
    message {
      id
      content
      role
      timestamp
      metadata {
        subjectReferences {
          subjectKey
          subjectKind
          displayName
        }
        planningContext {
          selectedBusinessAgent {
            id
            name
          }
          processAgentsInvoked {
            id
            name
            status
            skillsUsed {
              skillId
              skillName
              executionTimeMs
            }
          }
        }
        structuredResponse {
          summaryItems {
            status        # PASS | WARNING | FAIL | DENIED
            message
            details
          }
          citations {
            id
            sourceType    # POLICY | DOCUMENT | RECORD
            title
            url
            excerpt
          }
          availableActions {
            actionId
            label
            actionType    # CREATE_CASE | NOTIFY | ESCALATE
          }
        }
        accessDenials {
          resourceType
          reason
          policyReference
        }
      }
    }
    episodeId
  }
}

# Subscribe to streaming responses
subscription OnMessageStream($episodeId: ID!) {
  messageStream(episodeId: $episodeId) {
    chunk
    isComplete
    planningUpdate {
      currentStep
      totalSteps
      currentAgent
    }
  }
}

# Fetch explainability data
query GetDecisionExplanation($messageId: ID!) {
  decisionExplanation(messageId: $messageId) {
    processAgentsRan {
      name
      purpose
      skillsCalled {
        skillName
        inputSummary
        outputSummary
        durationMs
      }
      decisionPath
    }
    trustGraphContext {
      userRole
      allowedResources
      deniedResources {
        resource
        reason
        policyId
      }
    }
    evidencePackId
  }
}
```

**Component Breakdown:**

| Component | Purpose | Backend Services |
|-----------|---------|------------------|
| `ChatContainer` | Main chat layout, manages conversation state | Conversation Service |
| `MessageThread` | Renders message history with virtual scrolling | Conversation Service |
| `UserMessage` | User input bubble | - |
| `AgentResponse` | Complex response with structure | Conversation, Orchestrator |
| `PlanningIndicator` | Shows which agents/skills are running | Orchestrator Sidecar |
| `SummaryCard` | Structured findings display | Evidence Service |
| `CitationList` | Clickable source references | Search Service, Evidence |
| `ActionButtons` | One-click actions | Agent Catalog, Conversation |
| `ExplainPanel` | Slide-out explainability view | Evidence Service, Trust Graph |
| `SubjectSwitcher` | Change active subject context | Memory Service |
| `AgentSelector` | Switch business agent | Agent Catalog |

---

### 3. Explainability Panel ("How did you decide this?")

**Purpose:** Show the reasoning chain, skills invoked, and permission decisions.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Decision Explanation                            [âœ•]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Process Agents Invoked                      [â–¼]    â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ 1. Document Presence Check                     â”‚ â”‚ â”‚
â”‚ â”‚ â”‚    Skills: FetchDDAAccountSummary (120ms)      â”‚ â”‚ â”‚
â”‚ â”‚ â”‚            FetchDocumentsFromDMS (340ms)       â”‚ â”‚ â”‚
â”‚ â”‚ â”‚            CheckDocumentPresence (50ms)        â”‚ â”‚ â”‚
â”‚ â”‚ â”‚    Result: 2 missing documents identified      â”‚ â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚ â”‚ â”‚ 2. CIP/CIF Status Check                        â”‚ â”‚ â”‚
â”‚ â”‚ â”‚    Skills: FetchCIPStatus (90ms)               â”‚ â”‚ â”‚
â”‚ â”‚ â”‚    Result: All checks current                  â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Access Control Decisions                    [â–¼]    â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ âœ… Allowed: Garcia DDA accounts (McAllen)      â”‚ â”‚ â”‚
â”‚ â”‚ â”‚    Policy: branch_data_access                  â”‚ â”‚ â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚
â”‚ â”‚ â”‚ âŒ Denied: Garcia Commercial Loan              â”‚ â”‚ â”‚
â”‚ â”‚ â”‚    Reason: Role 'Branch Banker' cannot view    â”‚ â”‚ â”‚
â”‚ â”‚ â”‚            commercial loan data                â”‚ â”‚ â”‚
â”‚ â”‚ â”‚    Policy: lob_separation_policy               â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Documents Considered                        [â–¼]    â”‚ â”‚
â”‚ â”‚ â€¢ Policy Pack v3.2 - Retail DDA Required Docs     â”‚ â”‚
â”‚ â”‚ â€¢ Garcia_DDA_1234_statements.pdf                  â”‚ â”‚
â”‚ â”‚ â€¢ Garcia_Savings_5678_application.pdf             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                        â”‚
â”‚ [View Full Evidence Pack â†’]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4. QA Reviewer Dashboard (Pillar 2 Demo)

**Purpose:** Work queue showing overnight batch results with drill-down to evidence.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ QA Reviewer Dashboard                                    [Maya Chen â–¼]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ Yesterday at a Glance                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   1,234     â”‚ â”‚   1,180     â”‚ â”‚     42      â”‚ â”‚        12           â”‚ â”‚
â”‚ â”‚  Accounts   â”‚ â”‚   Passed    â”‚ â”‚  Warnings   â”‚ â”‚    Exceptions       â”‚ â”‚
â”‚ â”‚  Checked    â”‚ â”‚    âœ…       â”‚ â”‚     âš ï¸      â”‚ â”‚       âŒ            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Today's High-Risk Cases                              [Filter â–¼]   â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ Account        â”‚ Customer       â”‚ Issues    â”‚ Risk  â”‚ Actions     â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ ...1234        â”‚ Garcia, M      â”‚ 2 missing â”‚ High  â”‚ [Review â†’]  â”‚   â”‚
â”‚ â”‚ ...5678        â”‚ Johnson, R     â”‚ 1 missing â”‚ Med   â”‚ [Review â†’]  â”‚   â”‚
â”‚ â”‚ ...9012        â”‚ Smith, T       â”‚ Expired   â”‚ High  â”‚ [Review â†’]  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Trend Analysis                                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [Chart: Exception rate over past 30 days]                         â”‚   â”‚
â”‚ â”‚ [Chart: Top 5 missing document types]                             â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Case Detail View (drill-down):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Back to Queue    Account: ...123456789    Customer: Garcia, Maria     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ QA Reviewer Agent Summary                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ "For Account 123456789, I checked document presence across DMS    â”‚   â”‚
â”‚ â”‚  & core for 12 required items. 10 present, 2 missing:             â”‚   â”‚
â”‚ â”‚  â€¢ Updated W-8BEN (last version: 2019)                            â”‚   â”‚
â”‚ â”‚  â€¢ Signature card (not found in DMS)"                             â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Document Checklist                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ âœ… Account Opening Agreement     â”‚ Present â”‚ 2023-01-15 â”‚ [View]  â”‚   â”‚
â”‚ â”‚ âœ… Government ID Copy            â”‚ Present â”‚ 2023-01-15 â”‚ [View]  â”‚   â”‚
â”‚ â”‚ âœ… Signature Card                â”‚ Present â”‚ 2023-01-15 â”‚ [View]  â”‚   â”‚
â”‚ â”‚ âš ï¸ W-8BEN                        â”‚ Expired â”‚ 2019-03-20 â”‚ [View]  â”‚   â”‚
â”‚ â”‚ âŒ Beneficiary Designation       â”‚ Missing â”‚ -          â”‚ -       â”‚   â”‚
â”‚ â”‚ ... (8 more items)                                                â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Actions                                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [Open Evidence]  â”‚ â”‚ [Create Incident]â”‚ â”‚ [Notify Branch Mgr]    â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**GraphQL Operations:**

```graphql
# Fetch work queue
query GetQAWorkQueue($input: WorkQueueInput!) {
  qaWorkQueue(input: $input) {
    summary {
      totalChecked
      passed
      warnings
      exceptions
      checkDate
    }
    cases(first: 50, filter: $filter) {
      edges {
        node {
          id
          accountNumber
          customerName
          issueCount
          riskLevel
          status
          lastChecked
        }
      }
      pageInfo { ... }
    }
  }
}

# Fetch case detail
query GetQACaseDetail($caseId: ID!) {
  qaCase(id: $caseId) {
    id
    accountNumber
    customer {
      name
      customerId
    }
    agentSummary
    checkResults {
      documentType
      status          # PRESENT | MISSING | EXPIRED | WARNING
      foundDate
      expirationDate
      documentUrl
      notes
    }
    evidencePackId
    availableActions {
      actionId
      label
      enabled
    }
  }
}

# Execute action
mutation ExecuteQAAction($input: ExecuteActionInput!) {
  executeQAAction(input: $input) {
    success
    resultMessage
    createdIncidentId
  }
}
```

---

### 5. Evidence Pack Viewer

**Purpose:** Display the full audit trail for any decision.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Evidence Pack: EP-2024-001234                              [Export â†“]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ Tabs: [Summary] [Inputs] [Decision Path] [Timeline] [Raw Data]          â”‚
â”‚                                                                          â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                          â”‚
â”‚ Summary                                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Case: QA Review for Account ...123456789                          â”‚   â”‚
â”‚ â”‚ Subject: Garcia, Maria (Customer ID: C-789012)                    â”‚   â”‚
â”‚ â”‚ Initiated: 2024-01-15 02:30:00 UTC (Overnight Batch)              â”‚   â”‚
â”‚ â”‚ Completed: 2024-01-15 02:30:45 UTC                                â”‚   â”‚
â”‚ â”‚ Policy Pack: Retail DDA Required Docs v3.2                        â”‚   â”‚
â”‚ â”‚ Outcome: 2 exceptions identified                                  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Inputs                                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Data Sources Accessed:                                            â”‚   â”‚
â”‚ â”‚ â€¢ Silverlake Core: Account summary, CIP status                    â”‚   â”‚
â”‚ â”‚ â€¢ Synergy DMS: 10 documents retrieved                             â”‚   â”‚
â”‚ â”‚ â€¢ SharePoint: Policy Pack v3.2                                    â”‚   â”‚
â”‚ â”‚                                                                   â”‚   â”‚
â”‚ â”‚ [View Input Snapshot â†’]                                           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Decision Path                                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Rule: "All retail DDA accounts require beneficiary designation"   â”‚   â”‚
â”‚ â”‚ Input: No beneficiary document found in DMS                       â”‚   â”‚
â”‚ â”‚ Result: EXCEPTION - Missing required document                     â”‚   â”‚
â”‚ â”‚                                                                   â”‚   â”‚
â”‚ â”‚ Rule: "W-8BEN must be renewed every 3 years"                      â”‚   â”‚
â”‚ â”‚ Input: W-8BEN dated 2019-03-20 (4.8 years ago)                    â”‚   â”‚
â”‚ â”‚ Result: WARNING - Document expired                                â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Timeline                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [Interactive timeline visualization showing skill execution]      â”‚   â”‚
â”‚ â”‚ 02:30:00 â”€â”¬â”€ Start                                                â”‚   â”‚
â”‚ â”‚ 02:30:05 â”€â”¼â”€ FetchAccountSummary (120ms)                          â”‚   â”‚
â”‚ â”‚ 02:30:10 â”€â”¼â”€ FetchDocumentsFromDMS (340ms)                        â”‚   â”‚
â”‚ â”‚ 02:30:15 â”€â”¼â”€ CheckDocumentPresence (50ms)                         â”‚   â”‚
â”‚ â”‚ 02:30:45 â”€â”´â”€ Complete                                             â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**GraphQL Operations:**

```graphql
query GetEvidencePack($packId: ID!) {
  evidencePack(id: $packId) {
    id
    caseReference
    subject {
      subjectKey
      subjectKind
      displayName
    }
    initiatedAt
    completedAt
    initiatedBy
    triggerType           # BATCH | USER_REQUEST | SCHEDULED
    policyPackReference
    outcome {
      status
      summaryMessage
      exceptionCount
      warningCount
    }
    inputs {
      sourceSystem
      dataType
      retrievedAt
      snapshotUrl
    }
    decisionPath {
      ruleId
      ruleDescription
      inputSummary
      result
      resultReason
    }
    timeline {
      timestamp
      event
      actor
      durationMs
      details
    }
  }
}
```

---

## Axira Studio - Feature Specifications

### 1. Agent Designer (DAG View)

**Purpose:** Visual editor for Process Agent workflows.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Axira Studio    [Agents] [Skills] [Trust Graph] [Governance]    [Admin] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ Process Agent: DocPresenceCheckWithRegE                    [v1.2 DRAFT] â”‚
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                                     â”‚ â”‚
â”‚ â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚    â”‚ Trigger â”‚â”€â”€â”€â”€â”€â–¶â”‚ FetchAccountInfo â”‚â”€â”€â”€â”€â”€â–¶â”‚ CheckDocuments  â”‚  â”‚ â”‚
â”‚ â”‚    â”‚ (Start) â”‚      â”‚                  â”‚      â”‚                 â”‚  â”‚ â”‚
â”‚ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ â”‚                                                         â”‚          â”‚ â”‚
â”‚ â”‚                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚                                           â–¼                      â–¼ â”‚ â”‚
â”‚ â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚                                    â”‚ HasDebitCd â”‚      â”‚ Complete â”‚â”‚ â”‚
â”‚ â”‚                                    â”‚ (Gateway)  â”‚      â”‚ (Pass)   â”‚â”‚ â”‚
â”‚ â”‚                                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â”‚                                          â”‚ Yes                     â”‚ â”‚
â”‚ â”‚                                          â–¼                         â”‚ â”‚
â”‚ â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚ â”‚
â”‚ â”‚                                    â”‚ CheckRegE  â”‚â”€â”€â”€â”€â”€â”€â–¶ Complete  â”‚ â”‚
â”‚ â”‚                                    â”‚            â”‚                  â”‚ â”‚
â”‚ â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚ â”‚
â”‚ â”‚                                                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”‚
â”‚ â”‚ Node Palette     â”‚  Properties Panel (selected node)                  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â”‚ ğŸ“¥ Trigger   â”‚ â”‚  â”‚ Node: CheckRegE                             â”‚  â”‚
â”‚ â”‚ â”‚ âš¡ Skill     â”‚ â”‚  â”‚ Type: Skill Invocation                      â”‚  â”‚
â”‚ â”‚ â”‚ ğŸ”€ Gateway   â”‚ â”‚  â”‚ Skill: CheckDocumentPresence                â”‚  â”‚
â”‚ â”‚ â”‚ ğŸ“¤ Output    â”‚ â”‚  â”‚ Parameters:                                 â”‚  â”‚
â”‚ â”‚ â”‚ ğŸ›¡ï¸ Guard    â”‚ â”‚  â”‚   documentType: "REG_E_DISCLOSURE"          â”‚  â”‚
â”‚ â”‚ â”‚ ğŸ“‹ Subflow   â”‚ â”‚  â”‚   required: true                            â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ On Failure: [Create Exception â–¼]            â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚ [Save Draft] [Validate] [Request Publish]                [Test Run â–¶]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Features:**
- Drag-and-drop DAG editor (use ReactFlow)
- Node types: Trigger, Skill, Gateway (conditional), Guard (policy check), Output, Subflow
- Properties panel for selected node
- Validation (check all skills exist, parameters valid)
- Test run with mock data
- Version control (draft â†’ review â†’ published)

**GraphQL Operations:**

```graphql
# Fetch Process Agent definition
query GetProcessAgent($agentId: ID!, $version: String) {
  processAgent(id: $agentId, version: $version) {
    id
    name
    description
    version
    status                # DRAFT | IN_REVIEW | PUBLISHED | DEPRECATED
    subjectKind
    resourceDeclarations {
      resourceType
      accessLevel
    }
    workflow {
      nodes {
        id
        type              # TRIGGER | SKILL | GATEWAY | GUARD | OUTPUT | SUBFLOW
        position { x y }
        config
        skillBinding {
          skillId
          parameters
        }
      }
      edges {
        id
        source
        target
        condition
      }
    }
    policyPackBindings
    createdBy
    updatedAt
  }
}

# Save draft
mutation SaveProcessAgentDraft($input: SaveAgentInput!) {
  saveProcessAgentDraft(input: $input) {
    id
    version
    validationErrors {
      nodeId
      message
    }
  }
}

# Request publish (triggers governance)
mutation RequestPublish($agentId: ID!, $version: String!) {
  requestPublish(agentId: $agentId, version: $version) {
    reviewId
    status
    requiredApprovers
  }
}
```

---

### 2. Conversational Workflow Builder (Pillar 3 Demo)

**Purpose:** Natural language interface to create/modify agents.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Workflow Builder                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [User]                                                            â”‚   â”‚
â”‚ â”‚ "Clone the existing Document Presence Check for deposit accounts  â”‚   â”‚
â”‚ â”‚  and add an extra step: verify there is a signed Reg E form for   â”‚   â”‚
â”‚ â”‚  any account with a debit card. Ask me if you need details."      â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ [Agent]                                                           â”‚   â”‚
â”‚ â”‚ I'll create a new Process Agent based on Document Presence Check. â”‚   â”‚
â”‚ â”‚ A few clarifying questions:                                       â”‚   â”‚
â”‚ â”‚                                                                   â”‚   â”‚
â”‚ â”‚ 1. Should the Reg E check be mandatory for all accounts, or only  â”‚   â”‚
â”‚ â”‚    newly opened ones?                                             â”‚   â”‚
â”‚ â”‚    [All Accounts] [New Accounts Only] [Custom Rule...]            â”‚   â”‚
â”‚ â”‚                                                                   â”‚   â”‚
â”‚ â”‚ 2. Which system should I use to check debit card status?          â”‚   â”‚
â”‚ â”‚    [Silverlake Core] [Card Processor] [Both]                      â”‚   â”‚
â”‚ â”‚                                                                   â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ [User clicks "All Accounts" and "Silverlake Core"]                â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ [Agent]                                                           â”‚   â”‚
â”‚ â”‚ Perfect. Here's my plan:                                          â”‚   â”‚
â”‚ â”‚                                                                   â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚ â”‚ â”‚ New Process Agent: DocPresenceCheckWithRegE                 â”‚   â”‚   â”‚
â”‚ â”‚ â”‚ Based on: DocumentPresenceCheck v2.1                        â”‚   â”‚   â”‚
â”‚ â”‚ â”‚                                                             â”‚   â”‚   â”‚
â”‚ â”‚ â”‚ Changes:                                                    â”‚   â”‚   â”‚
â”‚ â”‚ â”‚ + Added: Gateway "HasDebitCard" after document check        â”‚   â”‚   â”‚
â”‚ â”‚ â”‚ + Added: Skill "CheckRegEPresence" on debit card branch     â”‚   â”‚   â”‚
â”‚ â”‚ â”‚ + Using: FetchAccountSummary (existing) for debit card flag â”‚   â”‚   â”‚
â”‚ â”‚ â”‚ + Using: CheckDocumentPresence with type="REG_E"            â”‚   â”‚   â”‚
â”‚ â”‚ â”‚                                                             â”‚   â”‚   â”‚
â”‚ â”‚ â”‚ [Preview Workflow â†’]                                        â”‚   â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚ â”‚                                                                   â”‚   â”‚
â”‚ â”‚ Ready to create this agent?                                       â”‚   â”‚
â”‚ â”‚ [Create as Draft] [Modify Plan] [Cancel]                          â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ [Type your message...                                        ] [Send]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Special UI Elements:**
- Inline choice buttons for clarifying questions
- Workflow preview card (mini DAG visualization)
- "Preview Workflow" opens side panel with full DAG
- Action buttons contextual to conversation state

---

### 3. Trust Graph Visualizer

**Purpose:** Visualize and explore the trust graph (users, roles, policies, resources).

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Trust Graph Explorer                                      [Search: ___] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                                   â”‚   â”‚
â”‚ â”‚              [D3 Force-Directed Graph Visualization]              â”‚   â”‚
â”‚ â”‚                                                                   â”‚   â”‚
â”‚ â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚   â”‚
â”‚ â”‚     â”‚  Maya    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚   â”‚
â”‚ â”‚     â”‚  Chen    â”‚         â”‚ memberOf                               â”‚   â”‚
â”‚ â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â”‚                                        â”‚   â”‚
â”‚ â”‚          â”‚ hasRole       â”‚                                        â”‚   â”‚
â”‚ â”‚          â–¼               â”‚                                        â”‚   â”‚
â”‚ â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                  â”‚   â”‚
â”‚ â”‚     â”‚  Branch  â”‚    â”‚ McAllen  â”‚                                  â”‚   â”‚
â”‚ â”‚     â”‚  Banker  â”‚    â”‚ Branch   â”‚                                  â”‚   â”‚
â”‚ â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚   â”‚
â”‚ â”‚          â”‚ grants                                                 â”‚   â”‚
â”‚ â”‚          â–¼                                                        â”‚   â”‚
â”‚ â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚   â”‚
â”‚ â”‚     â”‚ Retail   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ PolicyPk â”‚                             â”‚   â”‚
â”‚ â”‚     â”‚ Data     â”‚ governs â”‚ v3.2     â”‚                             â”‚   â”‚
â”‚ â”‚     â”‚ Access   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚   â”‚
â”‚ â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚   â”‚
â”‚ â”‚                                                                   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Selected: Maya Chen                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Type: User                                                        â”‚   â”‚
â”‚ â”‚ Branch: McAllen                                                   â”‚   â”‚
â”‚ â”‚ Roles: Branch Banker, QA Reviewer                                 â”‚   â”‚
â”‚ â”‚ Policies: retail_data_access, qa_review_pack, branch_masking      â”‚   â”‚
â”‚ â”‚ Resource Set: [View Computed Access â†’]                            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Legend: [ğŸ‘¤ User] [ğŸ­ Role] [ğŸ¢ Branch] [ğŸ“‹ Policy] [ğŸ“ Resource]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4. Skill Catalog Browser

**Purpose:** Browse, search, and inspect available skills.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Skill Catalog                              [Search skills...]  [+ New]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ Filter: [All â–¼] [Core Banking â–¼] [DMS â–¼] [CRM â–¼] [KYC â–¼]               â”‚
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ FetchAccountSummary                                    [Silverlake] â”‚   â”‚
â”‚ â”‚ Retrieves account summary including balance, status, and flags      â”‚   â”‚
â”‚ â”‚ Connector: silverlake-core   |   Avg latency: 120ms   |   v2.3     â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ FetchDocumentsFromDMS                                    [Synergy] â”‚   â”‚
â”‚ â”‚ Retrieves documents for a customer/account from DMS                 â”‚   â”‚
â”‚ â”‚ Connector: synergy-dms   |   Avg latency: 340ms   |   v1.8         â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ CheckDocumentPresence                                   [Internal] â”‚   â”‚
â”‚ â”‚ Validates required documents are present based on policy pack       â”‚   â”‚
â”‚ â”‚ Connector: internal   |   Avg latency: 50ms   |   v3.1             â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ FetchCIPStatus                                         [Silverlake] â”‚   â”‚
â”‚ â”‚ Retrieves CIP/CIF verification status for a customer               â”‚   â”‚
â”‚ â”‚ Connector: silverlake-core   |   Avg latency: 90ms   |   v2.0      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ [Load More...]                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Skill Detail View:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Back    FetchAccountSummary                              [Edit] [â–¼]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ Description: Retrieves account summary including balance, status,        â”‚
â”‚ product type, and account flags from Silverlake core banking system.    â”‚
â”‚                                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Input Schema                            â”‚ Output Schema           â”‚   â”‚
â”‚ â”‚ {                                       â”‚ {                       â”‚   â”‚
â”‚ â”‚   "accountNumber": "string",            â”‚   "accountId": "string",â”‚   â”‚
â”‚ â”‚   "includeFlags": "boolean"             â”‚   "balance": "number",  â”‚   â”‚
â”‚ â”‚ }                                       â”‚   "status": "string",   â”‚   â”‚
â”‚ â”‚                                         â”‚   "productType": "str", â”‚   â”‚
â”‚ â”‚                                         â”‚   "hasDebitCard": "bool"â”‚   â”‚
â”‚ â”‚                                         â”‚ }                       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Connector: silverlake-core                                               â”‚
â”‚ MCP Endpoint: /accounts/{accountNumber}/summary                          â”‚
â”‚ Required Permissions: ACCOUNT_READ                                       â”‚
â”‚                                                                          â”‚
â”‚ Used By:                                                                 â”‚
â”‚ â€¢ DocumentPresenceCheck (Process Agent)                                  â”‚
â”‚ â€¢ AccountReview (Process Agent)                                          â”‚
â”‚ â€¢ BranchBankerAssistant (Business Agent)                                â”‚
â”‚                                                                          â”‚
â”‚ Performance (Last 7 Days):                                               â”‚
â”‚ [Chart: Latency distribution]   [Chart: Error rate]                     â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5. Governance & Publishing

**Purpose:** Review and approve agent changes before production.

**Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Governance Queue                                        [My Reviews (3)] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ Pending Reviews                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â–¶ DocPresenceCheckWithRegE v1.0                                    â”‚   â”‚
â”‚ â”‚   Requested by: Sarah (Ops Lead)   |   2 hours ago                 â”‚   â”‚
â”‚ â”‚   Type: New Process Agent   |   Approvers: IT Lead, Compliance     â”‚   â”‚
â”‚ â”‚   [Review â†’]                                                       â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ â–¶ BranchBankerAssistant v2.3                                       â”‚   â”‚
â”‚ â”‚   Requested by: Mike (IT)   |   1 day ago                          â”‚   â”‚
â”‚ â”‚   Type: Update   |   Changes: Added 2 skills                       â”‚   â”‚
â”‚ â”‚   [Review â†’]                                                       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Recent Activity                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ âœ… QAReviewerAgent v3.1 published   |   Yesterday   |   By: Admin  â”‚   â”‚
â”‚ â”‚ âŒ CustomerSupportBot v1.0 rejected |   2 days ago  |   Reason:... â”‚   â”‚
â”‚ â”‚ âœ… DocumentPresenceCheck v2.1 published | 3 days ago | By: Admin   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Review Detail:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Review: DocPresenceCheckWithRegE v1.0                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ Summary                                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Requested by: Sarah (Ops Lead)                                    â”‚   â”‚
â”‚ â”‚ Created via: Conversational Builder                               â”‚   â”‚
â”‚ â”‚ Based on: DocumentPresenceCheck v2.1                              â”‚   â”‚
â”‚ â”‚ Description: Adds Reg E form verification for debit card accounts â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Changes (Diff View)                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ + Added node: Gateway "HasDebitCard"                              â”‚   â”‚
â”‚ â”‚ + Added node: Skill "CheckRegEPresence"                           â”‚   â”‚
â”‚ â”‚ + Added edge: CheckDocuments â†’ HasDebitCard                       â”‚   â”‚
â”‚ â”‚ + Added edge: HasDebitCard â†’ CheckRegEPresence (condition: yes)   â”‚   â”‚
â”‚ â”‚ ~ Modified: Output node connections                               â”‚   â”‚
â”‚ â”‚                                                                   â”‚   â”‚
â”‚ â”‚ [View Full Workflow â†’]  [Compare Side-by-Side â†’]                  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Validation Results                                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ âœ… All skills exist and are published                             â”‚   â”‚
â”‚ â”‚ âœ… Policy pack bindings valid                                     â”‚   â”‚
â”‚ â”‚ âœ… No circular dependencies                                       â”‚   â”‚
â”‚ â”‚ âœ… Resource declarations complete                                 â”‚   â”‚
â”‚ â”‚ âš ï¸ New skill (CheckRegEPresence) not yet load-tested             â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Approvals                                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â³ IT Lead (required)         [Approve] [Request Changes] [Reject]â”‚   â”‚
â”‚ â”‚ â³ Compliance (required)      [Approve] [Request Changes] [Reject]â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚ Comments                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [Add comment...]                                                  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## GraphQL Gateway Design

### Schema Organization

```
graphql-gateway/
â”œâ”€â”€ schema/
â”‚   â”œâ”€â”€ index.ts              # Schema composition
â”‚   â”œâ”€â”€ scalars.ts            # Custom scalars (DateTime, JSON, etc.)
â”‚   â”‚
â”‚   â”œâ”€â”€ user/                 # User & auth types
â”‚   â”‚   â”œâ”€â”€ types.graphql
â”‚   â”‚   â””â”€â”€ resolvers.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ conversation/         # Chat & messages
â”‚   â”‚   â”œâ”€â”€ types.graphql
â”‚   â”‚   â””â”€â”€ resolvers.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ agent/                # Business & Process Agents
â”‚   â”‚   â”œâ”€â”€ types.graphql
â”‚   â”‚   â””â”€â”€ resolvers.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ evidence/             # Evidence packs, audit trail
â”‚   â”‚   â”œâ”€â”€ types.graphql
â”‚   â”‚   â””â”€â”€ resolvers.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ trust-graph/          # Trust graph, permissions
â”‚   â”‚   â”œâ”€â”€ types.graphql
â”‚   â”‚   â””â”€â”€ resolvers.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ skill/                # Skills & capabilities
â”‚   â”‚   â”œâ”€â”€ types.graphql
â”‚   â”‚   â””â”€â”€ resolvers.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ qa/                   # QA workflow specific
â”‚   â”‚   â”œâ”€â”€ types.graphql
â”‚   â”‚   â””â”€â”€ resolvers.ts
â”‚   â”‚
â”‚   â””â”€â”€ governance/           # Publishing & approval
â”‚       â”œâ”€â”€ types.graphql
â”‚       â””â”€â”€ resolvers.ts
â”‚
â”œâ”€â”€ datasources/              # Service clients
â”‚   â”œâ”€â”€ TrustGraphService.ts
â”‚   â”œâ”€â”€ SkillsService.ts
â”‚   â”œâ”€â”€ EvidenceService.ts
â”‚   â”œâ”€â”€ ConversationService.ts
â”‚   â”œâ”€â”€ CapabilityGraphService.ts
â”‚   â”œâ”€â”€ AgentCatalogService.ts
â”‚   â”œâ”€â”€ OrchestratorService.ts
â”‚   â””â”€â”€ MemoryService.ts
â”‚
â””â”€â”€ context.ts                # Request context (auth, tenant)
```

### Service Mapping

| GraphQL Domain | Primary Service | Secondary Services |
|----------------|-----------------|-------------------|
| User/Auth | Trust Graph (:8081) | - |
| Conversation | Conversation (:8084) | Orchestrator (:8090), Memory (:8091) |
| Agents | Agent Catalog (:8086) | Capability Graph (:8085), Skills (:8082) |
| Evidence | Evidence (:8083) | - |
| Trust Graph | Trust Graph (:8081) | - |
| Skills | Skills (:8082) | Capability Graph (:8085) |
| QA Workflow | Evidence (:8083) | Conversation (:8084), Agent Catalog (:8086) |
| Governance | Agent Catalog (:8086) | - |

### Authentication Flow

```
1. User authenticates via SSO â†’ JWT issued
2. Frontend sends JWT in Authorization header
3. GraphQL Gateway:
   a. Validates JWT
   b. Extracts userId, orgId, roles
   c. Calls Trust Graph to get ResourceSet
   d. Creates RequestContext with tenant info
   e. Passes context to all resolvers
4. Resolvers include tenant context in service calls
5. Services enforce tenant isolation
```

---

## Demo Data Strategy

### Mock Data Approach

For the LSNB demo, create a seeded dataset:

**Organizations:**
```yaml
- orgId: "lsnb-001"
  name: "Lone Star National Bank"
  branches:
    - branchId: "mcallen-001"
      name: "McAllen Branch"
    - branchId: "edinburg-001"  
      name: "Edinburg Branch"
```

**Users:**
```yaml
- userId: "maya-chen-001"
  name: "Maya Chen"
  email: "maya.chen@lsnb.com"
  branch: "mcallen-001"
  roles: ["BRANCH_BANKER"]
  
- userId: "qa-reviewer-001"
  name: "Carlos Martinez"
  email: "carlos.martinez@lsnb.com"
  branch: "mcallen-001"
  roles: ["QA_REVIEWER"]

- userId: "ops-lead-001"
  name: "Sarah Johnson"
  email: "sarah.johnson@lsnb.com"
  roles: ["OPS_LEAD", "WORKFLOW_BUILDER"]

- userId: "it-admin-001"
  name: "Mike Thompson"
  email: "mike.thompson@lsnb.com"
  roles: ["IT_ADMIN", "STUDIO_USER"]
```

**Customers (Subjects):**
```yaml
- customerId: "garcia-household-001"
  name: "Garcia Household"
  members:
    - name: "Maria Garcia"
    - name: "Jose Garcia"
  accounts:
    - accountNumber: "****1234"
      type: "DDA"
      branch: "mcallen-001"
      hasDebitCard: true
    - accountNumber: "****5678"
      type: "SAVINGS"
      branch: "mcallen-001"
      hasDebitCard: false
    - accountNumber: "****9012"
      type: "COMMERCIAL_LOAN"  # Maya cannot see this
      branch: "corporate"
```

**Document States:**
```yaml
garcia-household-001:
  DDA-1234:
    - type: "ACCOUNT_OPENING_AGREEMENT"
      status: "PRESENT"
      date: "2023-01-15"
    - type: "GOVERNMENT_ID"
      status: "PRESENT"
      date: "2023-01-15"
    - type: "SIGNATURE_CARD"
      status: "PRESENT"
      date: "2023-01-15"
    - type: "REG_E_DISCLOSURE"
      status: "PRESENT"
      date: "2023-01-15"
  SAVINGS-5678:
    - type: "ACCOUNT_OPENING_AGREEMENT"
      status: "PRESENT"
    - type: "BENEFICIARY_DESIGNATION"
      status: "MISSING"         # Demo exception
    - type: "W8BEN"
      status: "EXPIRED"         # Demo warning
      date: "2019-03-20"
```

### Seeding Scripts

Create database seeding scripts that load this demo data:
- `scripts/seed-demo-data.ts` - Main seeder
- `scripts/fixtures/users.json`
- `scripts/fixtures/customers.json`
- `scripts/fixtures/documents.json`
- `scripts/fixtures/agents.json`

---

## Implementation Phases

### Phase 1: Foundation (Week 1-2)
1. Set up monorepo with Turborepo
2. Create shared component library (Radix + Tailwind)
3. Set up GraphQL Gateway with auth
4. Implement basic data sources for all 8 services
5. Create authentication flow

### Phase 2: Axira Home Core (Week 3-4)
1. Chat interface with message rendering
2. Basic conversation flow (send/receive)
3. Streaming response support
4. Subject context switching
5. Simple structured response cards

### Phase 3: Axira Home Polish (Week 5-6)
1. Explainability panel
2. Citation rendering with links
3. Action buttons (create case, notify)
4. QA Reviewer dashboard
5. Evidence pack viewer
6. Work queue with filtering

### Phase 4: Axira Studio Core (Week 7-8)
1. Agent Designer with ReactFlow
2. Node palette and properties panel
3. Save/load agent definitions
4. Basic validation

### Phase 5: Axira Studio Polish (Week 9-10)
1. Conversational workflow builder
2. Trust Graph visualizer
3. Skill catalog browser
4. Governance workflow
5. Publishing flow

### Phase 6: Demo Preparation (Week 11-12)
1. Load demo data
2. Create demo scripts/scenarios
3. Polish animations and transitions
4. Performance optimization
5. Bug fixes and edge cases

---

## Key Implementation Notes

### 1. Streaming Chat Responses

Use GraphQL subscriptions for real-time streaming:

```typescript
// Frontend subscription
const MESSAGE_STREAM = gql`
  subscription OnMessageStream($episodeId: ID!) {
    messageStream(episodeId: $episodeId) {
      chunk
      isComplete
      planningUpdate {
        currentStep
        currentAgent
      }
    }
  }
`;

// Accumulate chunks into full message
const [fullMessage, setFullMessage] = useState('');
useSubscription(MESSAGE_STREAM, {
  variables: { episodeId },
  onData: ({ data }) => {
    setFullMessage(prev => prev + data.chunk);
    if (data.planningUpdate) {
      setPlanningState(data.planningUpdate);
    }
  }
});
```

### 2. Trust Graph Gating in UI

Always check permissions before showing data:

```typescript
// Component that respects access control
function AccountCard({ account, userResourceSet }) {
  const canView = userResourceSet.allowedProductTypes.includes(account.productType)
    && userResourceSet.allowedBranches.includes(account.branch);
  
  if (!canView) {
    return (
      <AccessDeniedCard 
        reason="Your role doesn't allow access to this account type"
        policyRef="lob_separation_policy"
      />
    );
  }
  
  return <AccountDetails account={account} />;
}
```

### 3. ReactFlow for DAG Editor

```typescript
// Agent Designer with ReactFlow
import ReactFlow, { 
  Background, 
  Controls,
  MiniMap,
  addEdge,
  useNodesState,
  useEdgesState
} from 'reactflow';

const nodeTypes = {
  trigger: TriggerNode,
  skill: SkillNode,
  gateway: GatewayNode,
  guard: GuardNode,
  output: OutputNode,
};

function AgentDesigner({ agent }) {
  const [nodes, setNodes, onNodesChange] = useNodesState(agent.workflow.nodes);
  const [edges, setEdges, onEdgesChange] = useEdgesState(agent.workflow.edges);
  
  return (
    <ReactFlow
      nodes={nodes}
      edges={edges}
      nodeTypes={nodeTypes}
      onNodesChange={onNodesChange}
      onEdgesChange={onEdgesChange}
      onConnect={onConnect}
    >
      <Background />
      <Controls />
      <MiniMap />
    </ReactFlow>
  );
}
```

### 4. Evidence Timeline

Use a timeline component for evidence visualization:

```typescript
// Timeline entry component
function TimelineEntry({ entry }) {
  return (
    <div className="flex items-start gap-4">
      <div className="w-20 text-sm text-gray-500">
        {format(entry.timestamp, 'HH:mm:ss')}
      </div>
      <div className="flex-1">
        <div className="font-medium">{entry.event}</div>
        {entry.durationMs && (
          <div className="text-sm text-gray-500">
            Duration: {entry.durationMs}ms
          </div>
        )}
      </div>
    </div>
  );
}
```

---

## Testing Strategy

### Unit Tests
- Component rendering
- Hook logic
- Utility functions
- GraphQL mocks

### Integration Tests
- User flows (send message â†’ receive response)
- Multi-step interactions
- Form submissions

### E2E Tests (Playwright)
- Full demo flows
- Cross-app navigation (Home â†’ Studio)
- Authentication flows

### Demo-Specific Tests
- Pillar 1 flow: Maya's cold-open question
- Pillar 2 flow: QA work queue drill-down
- Pillar 3 flow: Conversational workflow creation

---

## Performance Considerations

1. **Virtual scrolling** for long message threads and work queues
2. **Optimistic updates** for actions (create case, send message)
3. **Query caching** with Apollo Client cache policies
4. **Code splitting** by route/feature
5. **Image optimization** for any avatars/icons
6. **Debounced search** for skill catalog, trust graph search

---

## Accessibility Requirements

1. Keyboard navigation for all interactive elements
2. ARIA labels for custom components
3. Focus management in modals/panels
4. Color contrast compliance (WCAG AA)
5. Screen reader support for chat messages
6. Reduced motion support

---

## Environment Configuration

```env
# .env.local (Axira Home)
VITE_GRAPHQL_ENDPOINT=http://localhost:4000/graphql
VITE_GRAPHQL_WS_ENDPOINT=ws://localhost:4000/graphql
VITE_AUTH_DOMAIN=auth.lsnb.local
VITE_STUDIO_URL=http://localhost:5174

# .env.local (Axira Studio)  
VITE_GRAPHQL_ENDPOINT=http://localhost:4000/graphql
VITE_GRAPHQL_WS_ENDPOINT=ws://localhost:4000/graphql
VITE_AUTH_DOMAIN=auth.lsnb.local
VITE_HOME_URL=http://localhost:5173
```

---

## Appendix: Component Library Checklist

### Shared Components to Build

- [ ] `Button` (variants: primary, secondary, ghost, danger)
- [ ] `Input`, `Textarea`, `Select`
- [ ] `Card`, `Panel`
- [ ] `Modal`, `SlideOver`, `Dialog`
- [ ] `Tabs`
- [ ] `Table` with sorting/filtering
- [ ] `Badge`, `Tag`
- [ ] `Avatar`
- [ ] `Tooltip`, `Popover`
- [ ] `Toast` notifications
- [ ] `Skeleton` loaders
- [ ] `EmptyState`
- [ ] `ErrorBoundary`
- [ ] `StatusIndicator` (pass/warning/fail/denied)
- [ ] `Citation` link
- [ ] `TimeAgo` relative time
- [ ] `DataTable` with pagination
- [ ] `SearchInput` with debounce
- [ ] `LoadingSpinner`
- [ ] `Breadcrumbs`
- [ ] `NavigationMenu`

### Axira Home Specific

- [ ] `ChatMessage` (user/agent variants)
- [ ] `StructuredResponseCard`
- [ ] `PlanningIndicator`
- [ ] `ExplainPanel`
- [ ] `CitationList`
- [ ] `ActionButton`
- [ ] `SubjectSwitcher`
- [ ] `AgentSelector`
- [ ] `DashboardMetricCard`
- [ ] `WorkQueueTable`
- [ ] `CaseDetailView`
- [ ] `EvidencePackViewer`
- [ ] `TimelineVisualization`

### Axira Studio Specific

- [ ] `DAGCanvas` (ReactFlow wrapper)
- [ ] `NodePalette`
- [ ] `PropertiesPanel`
- [ ] `WorkflowPreviewCard`
- [ ] `ConversationalBuilder`
- [ ] `TrustGraphCanvas` (D3 wrapper)
- [ ] `SkillCard`
- [ ] `SkillDetailView`
- [ ] `GovernanceQueueItem`
- [ ] `ReviewDetailView`
- [ ] `DiffViewer`
- [ ] `ApprovalButtons`

---

This guide provides the complete blueprint for building Axira Home and Axira Studio. Use it with Claude Code to systematically implement each feature while maintaining consistency with the backend services and demo requirements.
